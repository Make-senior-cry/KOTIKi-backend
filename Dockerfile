FROM gradle:7.6-jdk17-alpine AS build
ARG DATABASE_URL
ARG JWT_ACCESS_TOKEN_SECRET
ARG JWT_REFRESH_TOKEN_SECRET
ARG PGDATABASE
ARG PGHOST
ARG PGPASSWORD
ARG PGPORT
ARG PGUSER
ARG SERVER_ADDRESS
ARG PROJECT_PATH
ARG PORT
ADD . /kotiki
WORKDIR /kotiki
RUN gradle build -x test
ENTRYPOINT ["gradle", "bootRun"]